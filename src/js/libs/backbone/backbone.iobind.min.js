!function(e,t){if("function"==typeof define&&define.amd)define(["backbone","underscore","socket.io","jquery"],t);else if("object"==typeof exports){var o=require("underscore"),i=require("backbone"),n=require("socket.io-client"),s=require("jquery");module.exports=t(i,o,n,s)}else t(e.Backbone,e._,e.io,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,o,i){return e.Model.prototype.ioBindVersion="0.4.8",e.Model.prototype.ioBind=function(o,i,n,s){var r=this._ioEvents||(this._ioEvents={}),l=t.result(this,"url")+":"+o,c=this;"function"==typeof i&&(s=n,n=i,i=this.socket||window.socket||e.socket);var a={name:o,global:l,cbLocal:n,cbGlobal:function(){var e=[o];e.push.apply(e,arguments),c.trigger.apply(c,e)}};return this.bind(a.name,a.cbLocal,s||c),i.on(a.global,a.cbGlobal),r[a.name]?r[a.name].push(a):r[a.name]=[a],this},e.Model.prototype.ioUnbind=function(o,i,n){var s=this._ioEvents||(this._ioEvents={}),r=this.url()+":"+o;"function"==typeof i&&(n=i,i=this.socket||window.socket||e.socket);var l=s[o];if(!t.isEmpty(l)){if(n&&"function"==typeof n){for(var c=0,a=l.length;a>c;c++)n==l[c].cbLocal&&(this.unbind(l[c].name,l[c].cbLocal),i.removeListener(l[c].global,l[c].cbGlobal),l[c]=!1);l=t.compact(l)}else this.unbind(o),i.removeAllListeners(r),i.$events&&delete i.$events[r];0===l.length&&delete s[o]}return this},e.Model.prototype.ioUnbindAll=function(t){var o=this._ioEvents||(this._ioEvents={});t||(t=this.socket||window.socket||e.socket);for(var i in o)this.ioUnbind(i,t);return this},e.Collection.prototype.ioBindVersion="0.4.8",e.Collection.prototype.ioBind=function(o,i,n,s){var r=this._ioEvents||(this._ioEvents={}),l=t.result(this,"url")+":"+o,c=this;"function"==typeof i&&(s=n,n=i,i=this.socket||window.socket||e.socket);var a={name:o,global:l,cbLocal:n,cbGlobal:function(){var e=[o];e.push.apply(e,arguments),c.trigger.apply(c,e)}};return this.bind(a.name,a.cbLocal,s),i.on(a.global,a.cbGlobal),r[a.name]?r[a.name].push(a):r[a.name]=[a],this},e.Collection.prototype.ioUnbind=function(o,i,n){var s=this._ioEvents||(this._ioEvents={}),r=this.url+":"+o;"function"==typeof i&&(n=i,i=this.socket||window.socket||e.socket);var l=s[o];if(!t.isEmpty(l)){if(n&&"function"==typeof n){for(var c=0,a=l.length;a>c;c++)n==l[c].cbLocal&&(this.unbind(l[c].name,l[c].cbLocal),i.removeListener(l[c].global,l[c].cbGlobal),l[c]=!1);l=t.compact(l)}else this.unbind(o),i.removeAllListeners(r),i.$events&&delete i.$events[r];0===l.length&&delete s[o]}return this},e.Collection.prototype.ioUnbindAll=function(t){var o=this._ioEvents||(this._ioEvents={});t||(t=this.socket||window.socket||e.socket);for(var i in o)this.ioUnbind(i,t);return this},e});
//# sourceMappingURL=backbone.iobind.map