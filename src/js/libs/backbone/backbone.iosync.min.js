!function(e,r){if("function"==typeof define&&define.amd)define(["backbone","underscore","socket.io","jquery"],r);else if("object"==typeof exports){var t=require("underscore"),n=require("backbone"),o=require("socket.io-client"),u=require("jquery");module.exports=r(n,t,o,u)}else r(e.Backbone,e._,e.io,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,r,t,n){var o=e.sync,u=function(t,o,u){var i=r.extend({},u);i.url?i.url=r.result(i,"url"):i.url=r.result(o,"url")||c();var s=i.url.split("/"),a=""!==s[0]?s[0]:s[1];!i.data&&o&&(i.data=i.attrs||o.toJSON(u)||{}),i.patch===!0&&null==i.data.id&&o&&(i.data.id=o.id);var d=o.socket||e.socket||window.socket,l=n.Deferred();d.emit(a+":"+t,i.data,function(e,r){e?(u.error&&u.error(e),l.reject()):(u.success&&u.success(r),l.resolve())});var f=l.promise();return o.trigger("request",o,f,u),f},i=function(e){return r.result(e.ajaxSync)?o:u};e.sync=function(e,r,t){return i(r).apply(this,[e,r,t])};var c=function(){throw new Error('A "url" property or function must be specified')};return e});
//# sourceMappingURL=backbone.iosync.map